(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4555:function(e,t,n){Promise.resolve().then(n.bind(n,4342))},4342:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(7573),s=n(7653),a=n(1695),o=n(7264),i=n(107),l=n(5118),c=n(2829),u=n(6643),d=n(4313);let m=(0,d.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),h=(0,d.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),f=(0,d.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function x(e){let{icon:t,label:n,value:s,sub:a,color:o}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center ".concat(o),children:(0,r.jsx)(t,{className:"h-5 w-5 text-white"})}),a&&(0,r.jsx)("span",{className:"text-xs text-slate-400",children:a})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:s}),(0,r.jsx)("div",{className:"text-sm text-slate-500 mt-1",children:n})]})}function g(){let{user:e,token:t,isLoading:n}=(0,o.a)(),d=(0,a.useRouter)(),[g,v]=(0,s.useState)(null),[b,p]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{n||e&&"ADMIN"===e.role||d.replace("/login")},[e,n,d]),(0,s.useEffect)(()=>{t&&l.fy(t).then(v).catch(()=>{}).finally(()=>p(!1))},[t]),n||!e)?null:(0,r.jsx)(i.L,{children:(0,r.jsxs)("div",{className:"animate-fade-in",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Dashboard"}),(0,r.jsxs)("p",{className:"text-slate-500 mt-1",children:["Welcome back, ",e.name,"!"]})]}),b?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-pulse",children:[(0,r.jsx)("div",{className:"h-10 w-10 bg-slate-200 rounded-lg mb-4"}),(0,r.jsx)("div",{className:"h-6 w-16 bg-slate-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 w-24 bg-slate-200 rounded"})]},t))}):g?(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,r.jsx)(x,{icon:c.Z,label:"Total Products",value:g.totalProducts,color:"bg-brand-600"}),(0,r.jsx)(x,{icon:u.Z,label:"Total Orders",value:g.totalOrders,color:"bg-emerald-600"}),(0,r.jsx)(x,{icon:m,label:"Total Revenue",value:"â‚¹".concat(g.totalRevenue.toLocaleString()),color:"bg-amber-600"}),(0,r.jsx)(x,{icon:h,label:"Customers",value:g.totalUsers,color:"bg-purple-600"}),(0,r.jsx)(x,{icon:f,label:"Pending Orders",value:g.pendingOrders,color:"bg-orange-600",sub:"Needs attention"})]}):(0,r.jsx)("p",{className:"text-slate-500",children:"Unable to load dashboard data."})]})})}},107:function(e,t,n){"use strict";n.d(t,{L:function(){return h}});var r=n(7573),s=n(7264),a=n(1695),o=n(8146),i=n(3071),l=n(2829),c=n(6643),u=n(6548),d=n(5729);let m=[{href:"/",label:"Dashboard",icon:i.Z},{href:"/products",label:"Products",icon:l.Z},{href:"/orders",label:"Orders",icon:c.Z}];function h(e){let{children:t}=e,{user:n,isLoading:i,logout:l}=(0,s.a)(),c=(0,a.usePathname)();return i?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-pulse text-slate-400",children:"Loading..."})}):n&&"ADMIN"===n.role?(0,r.jsxs)("div",{className:"min-h-screen flex",children:[(0,r.jsxs)("aside",{className:"w-64 bg-slate-900 text-white flex flex-col shrink-0",children:[(0,r.jsx)("div",{className:"p-6 border-b border-slate-800",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-9 w-9 rounded-lg bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm",children:"A"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-sm",children:"Anandibi"}),(0,r.jsxs)("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[(0,r.jsx)(u.Z,{className:"h-3 w-3"})," Admin Panel"]})]})]})}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:m.map(e=>{let t=c===e.href||"/"!==e.href&&c.startsWith(e.href);return(0,r.jsxs)(o.default,{href:e.href,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-brand-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[(0,r.jsx)(e.icon,{className:"h-4 w-4"}),e.label]},e.href)})}),(0,r.jsxs)("div",{className:"p-4 border-t border-slate-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2 mb-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-brand-600 flex items-center justify-center text-white text-xs font-medium",children:n.name.charAt(0)}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("div",{className:"text-sm font-medium truncate",children:n.name}),(0,r.jsx)("div",{className:"text-xs text-slate-400 truncate",children:n.email})]})]}),(0,r.jsxs)("button",{onClick:l,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-slate-400 hover:text-red-400 hover:bg-slate-800 transition-colors w-full",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4"}),"Logout"]})]})]}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"p-8",children:t})})]}):null}},5118:function(e,t,n){"use strict";n.d(t,{AU:function(){return m},CP:function(){return d},E7:function(){return h},Ir:function(){return u},Xp:function(){return o},fy:function(){return f},nM:function(){return c},ry:function(){return l},wv:function(){return i},x4:function(){return a}});let r=n(4859).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:n,headers:s,...a}=t,o={...s||{}};a.body instanceof FormData||(o["Content-Type"]="application/json"),n&&(o.Authorization="Bearer ".concat(n));let i=await fetch("".concat(r).concat(e),{headers:o,...a});if(!i.ok)throw Error((await i.json().catch(()=>({message:"An error occurred"}))).message||"Request failed with status ".concat(i.status));return i.json()}function a(e){return s("/auth/login",{method:"POST",body:JSON.stringify(e)})}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new URLSearchParams;Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&""!==r&&n.set(t,String(r))});let r=n.toString();return s("/products".concat(r?"?".concat(r):""),{token:e})}function i(e,t){return s("/products/".concat(t),{token:e})}function l(e,t){return s("/products",{method:"POST",body:JSON.stringify(t),token:e})}function c(e,t,n){return s("/products/".concat(t),{method:"PUT",body:JSON.stringify(n),token:e})}function u(e,t){return s("/products/".concat(t),{method:"DELETE",token:e})}function d(e){return s("/categories",{token:e})}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new URLSearchParams;Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&""!==r&&n.set(t,String(r))});let r=n.toString();return s("/orders".concat(r?"?".concat(r):""),{token:e})}function h(e,t,n){return s("/orders/".concat(t,"/status"),{method:"PUT",body:JSON.stringify({status:n}),token:e})}function f(e){return s("/orders/stats",{token:e})}},7264:function(e,t,n){"use strict";n.d(t,{H:function(){return i},a:function(){return l}});var r=n(7573),s=n(7653),a=n(5118);let o=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[n,i]=(0,s.useState)({user:null,token:null,isLoading:!0});(0,s.useEffect)(()=>{let e=localStorage.getItem("anandibi_admin_token"),t=localStorage.getItem("anandibi_admin_user");if(e&&t)try{let n=JSON.parse(t);"ADMIN"===n.role?i({user:n,token:e,isLoading:!1}):(localStorage.removeItem("anandibi_admin_token"),localStorage.removeItem("anandibi_admin_user"),i({user:null,token:null,isLoading:!1}))}catch(e){localStorage.removeItem("anandibi_admin_token"),localStorage.removeItem("anandibi_admin_user"),i({user:null,token:null,isLoading:!1})}else i(e=>({...e,isLoading:!1}))},[]);let l=(0,s.useCallback)(async(e,t)=>{let n=await a.x4({email:e,password:t});if("ADMIN"!==n.user.role)throw Error("Access denied. Admin accounts only.");localStorage.setItem("anandibi_admin_token",n.accessToken),localStorage.setItem("anandibi_admin_user",JSON.stringify(n.user)),i({user:n.user,token:n.accessToken,isLoading:!1})},[]),c=(0,s.useCallback)(()=>{localStorage.removeItem("anandibi_admin_token"),localStorage.removeItem("anandibi_admin_user"),i({user:null,token:null,isLoading:!1})},[]);return(0,r.jsx)(o.Provider,{value:{...n,login:l,logout:c},children:t})}function l(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},4313:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7653),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let n=(0,r.forwardRef)((n,o)=>{let{color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:m,...h}=n;return(0,r.createElement)("svg",{ref:o,...s,width:l,height:l,stroke:i,strokeWidth:u?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(a(e)),d].join(" "),...h},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(m)?m:[m]])});return n.displayName="".concat(e),n}},6548:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(4313).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},1695:function(e,t,n){"use strict";var r=n(1219);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},4859:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(9566)},9566:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?l=r.concat(l):u=-1,l.length&&m())}function m(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(r=l,l=[];++u<t;)r&&r[u].run();u=-1,t=l.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||c||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}},o=!0;try{t[e](a,a.exports,r),o=!1}finally{o&&delete n[e]}return a.exports}r.ab="//";var s=r(229);e.exports=s}()}},function(e){e.O(0,[115,293,528,744],function(){return e(e.s=4555)}),_N_E=e.O()}]);